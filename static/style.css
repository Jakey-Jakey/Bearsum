/* static/style.css */

/* --- Variables --- */
:root {
    --font-primary: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    --font-secondary: 'Consolas', 'Monaco', 'Andale Mono', 'Ubuntu Mono', monospace; /* For code/raw text */

    /* Honey/Bear Theme Palette - Refined */
    --color-bg: #FEFBF3; /* Slightly warmer off-white */
    --color-surface: #FFFFFF;
    --color-text-primary: #3E2723; /* Darker, richer brown */
    --color-text-secondary: #6D4C41; /* Slightly darker secondary brown */
    --color-text-dark: #3E2723; /* Consistent dark brown */
    --color-accent-primary: #FFC107; /* Brighter, primary amber */
    --color-accent-secondary: #FFA000; /* Deeper amber for accents/hovers */
    --color-accent-strong: #FF8F00; /* Strong orange/honey for calls to action */
    --color-border-light: #FFE082; /* Lighter amber border */
    --color-border-medium: #D7CCC8; /* Neutral light brown border */
    --color-border-dark: #A1887F; /* Darker neutral border */
    --color-bg-light: #FFF8E1; /* Light creamy yellow (kept for subtle backgrounds) */
    --color-bg-subtle: #FAFAFA;
    --color-success-bg: #E8F5E9;
    --color-success-text: #1B5E20; /* Darker green for better contrast */
    --color-success-border: #A5D6A7;
    --color-error-bg: #FFEBEE;
    --color-error-text: #B71C1C; /* Darker red for better contrast */
    --color-error-border: #EF9A9A;
    --color-warning-bg: #FFF3E0;
    --color-warning-text: #E65100; /* Darker orange for better contrast */
    --color-warning-border: #FFCC80;

    --border-radius: 10px; /* Slightly larger radius for softer look */
    --box-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.06);
    --box-shadow-medium: 0 4px 15px rgba(0, 0, 0, 0.1);
    --box-shadow-heavy: 0 6px 20px rgba(0, 0, 0, 0.12);
    --transition-speed: 0.25s;
    --transition-easing: ease-in-out;

    /* Subtle Honeycomb Pattern */
    --honeycomb-bg: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='23' viewBox='0 0 20 23'%3E%3Cg fill='%23FFA000' fill-opacity='0.05'%3E%3Cpath d='M10 0l10 5.77v11.54L10 23 0 17.31V5.77z'/%3E%3C/g%3E%3C/svg%3E");
}

/* --- Base & Typography --- */
body {
    font-family: var(--font-primary);
    margin: 0;
    padding: 0;
    background-color: var(--color-bg);
    /* Add subtle honeycomb pattern to body */
    background-image: var(--honeycomb-bg);
    color: var(--color-text-primary);
    line-height: 1.7; /* Increased for readability */
    font-size: 17px; /* Slightly larger base font size */
    -webkit-font-smoothing: antialiased; /* Smoother fonts */
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden; /* Prevent horizontal scrollbars during minor transforms */
}

h1, h2, h3, h4 {
    color: var(--color-text-dark);
    line-height: 1.3;
    margin-bottom: 0.7em; /* Adjusted spacing */
    font-weight: 700; /* Bolder headings */
}
h1 { font-size: 2.5rem; letter-spacing: -0.5px; }
h2 { font-size: 1.8rem; margin-top: 2em; } /* More top margin for sections */
h3 { font-size: 1.4rem; font-weight: 600; }
h4 { font-size: 1.1rem; color: var(--color-text-secondary); font-weight: 600; }
p { margin-bottom: 1.2em; } /* More paragraph spacing */
a { color: var(--color-accent-strong); text-decoration: none; transition: color var(--transition-speed) var(--transition-easing); }
a:hover { color: var(--color-accent-secondary); text-decoration: underline; }

/* --- Layout --- */
.container {
    max-width: 900px; /* Wider for more space */
    margin: 2.5em auto; /* More top/bottom margin */
    padding: 2.5em 3em; /* Increased padding */
    background-color: var(--color-surface);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow-medium);
    position: relative; /* Needed for absolute positioning if used in animations */
}

.app-header {
    /* Gradient background */
    background: linear-gradient(135deg, var(--color-accent-primary) 0%, var(--color-accent-secondary) 100%);
    color: var(--color-text-dark);
    padding: 1.5em 0; /* More padding */
    text-align: center;
    margin-bottom: 3em; /* Increased spacing */
    border-bottom: 5px solid var(--color-accent-strong); /* Stronger bottom border */
    box-shadow: var(--box-shadow-light);
}
.app-header h1 { margin: 0; font-weight: 700; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
.theme-accent { font-weight: 400; font-size: 0.8em; color: var(--color-text-primary); display: block; margin-top: 0.2em; }

.upload-section{
    margin-bottom: 3em; /* Consistent larger spacing */
}

/* --- Utility --- */
.visually-hidden { /* Hides element visually but keeps accessible */
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}
.hidden { display: none !important; } /* Keep using display:none for JS logic, handle transition separately */


/* --- Flash Messages --- */
.flash-messages { margin-bottom: 2em; }
.flash { padding: 1em 1.5em; margin-bottom: 1em; border-radius: 6px; border: 1px solid transparent; font-size: 0.95em; box-shadow: var(--box-shadow-light); }
.flash-success { color: var(--color-success-text); background-color: var(--color-success-bg); border-color: var(--color-success-border); }
.flash-error { color: var(--color-error-text); background-color: var(--color-error-bg); border-color: var(--color-error-border); }
.flash-warning { color: var(--color-warning-text); background-color: var(--color-warning-bg); border-color: var(--color-warning-border); }
.error-area { background-color: var(--color-error-bg); padding: 1.5em; border: 1px solid var(--color-error-border); border-radius: var(--border-radius); margin-top: 2em; }
.error-area h4 { margin-top: 0; color: var(--color-error-text); }

/* --- File Info Box --- */
.file-info {
    font-size: 0.9em; color: var(--color-text-secondary); margin-bottom: 2em; padding: 1em 1.5em;
    background-color: var(--color-bg-light); border-left: 5px solid var(--color-accent-primary); border-radius: 6px;
}

/* --- Upload Form & Drag Drop --- */
.upload-form { display: flex; flex-direction: column; gap: 2em; } /* Increased gap */
.upload-form .form-group { margin-bottom: 0; }
.upload-form label:not(.ghost-buttons label) {
    display: block; margin-bottom: 0.6em; font-weight: 600; color: var(--color-text-dark); font-size: 1.05em; /* Slightly larger labels */
}

.drop-zone {
    border: 3px dashed var(--color-border-medium);
    border-radius: var(--border-radius);
    padding: 3em 2em; /* Increased padding */
    text-align: center;
    cursor: pointer;
    background-color: var(--color-bg-subtle);
    transition: background-color var(--transition-speed) var(--transition-easing),
                border-color var(--transition-speed) var(--transition-easing),
                transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smoother scale transition */
}
.drop-zone p { margin: 0.6em 0; color: var(--color-text-secondary); font-size: 1.1em; }
.drop-zone.dragover {
    background-color: var(--color-bg-light);
    border-color: var(--color-accent-strong);
    border-style: solid; /* Change border style on hover */
    transform: scale(1.015); /* Slightly more noticeable scale */
}
.btn-browse {
    display: inline-block; margin-top: 0.8em;
    background-color: var(--color-surface);
    color: var(--color-accent-strong);
    border: 2px solid var(--color-accent-secondary); /* Thicker border */
    padding: 10px 20px; /* More padding */
    border-radius: var(--border-radius);
    font-weight: 600;
    transition: all var(--transition-speed) var(--transition-easing);
}
.btn-browse:hover {
    background-color: var(--color-bg-light);
    border-color: var(--color-accent-strong);
    color: var(--color-text-dark);
    text-decoration: none;
    transform: translateY(-2px); /* Subtle lift */
    box-shadow: var(--box-shadow-light);
}

.file-list-display {
    margin-top: 1.5em; font-size: 0.9em; background-color: var(--color-surface);
    border: 1px solid var(--color-border-light); border-radius: 6px; padding: 1em 1.5em;
    min-height: 4em; box-shadow: inset 0 1px 4px rgba(0,0,0,0.04);
    transition: background-color var(--transition-speed) var(--transition-easing); /* Add transition */
}
.file-list-display ul { list-style: none; padding: 0; margin: 0; }
.file-list-display li {
    padding: 0.5em 0; border-bottom: 1px dashed var(--color-border-light);
    display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5em;
    animation: fadeInItem 0.3s ease-out forwards; /* Simple fade-in */
    opacity: 0; /* Start hidden */
}
.file-list-display li:last-child { border-bottom: none; }
.file-list-display .file-size { color: var(--color-text-secondary); margin-left: 1em; font-size: 0.9em; white-space: nowrap; }
.file-list-display .file-error { color: var(--color-error-text); font-weight: bold; margin-left: 1em; font-size: 0.9em; }
.file-list-display li.has-error { background-color: var(--color-error-bg); padding-left: 10px; margin-left: -10px; border-radius: 4px;} /* More visible error highlight */

@keyframes fadeInItem {
    to {
        opacity: 1;
    }
}


/* --- Radio Button - Ghost Button Style --- */
.radio-group.ghost-buttons {
    display: flex; gap: 1em; flex-wrap: wrap;
}
.radio-group.ghost-buttons label { margin-right: 0; display: inline-block; }
.radio-group.ghost-buttons span {
    display: block; padding: 10px 20px; /* Increased padding */
    border: 2px solid var(--color-border-medium);
    border-radius: var(--border-radius); cursor: pointer;
    background-color: var(--color-surface); color: var(--color-text-secondary);
    transition: all var(--transition-speed) var(--transition-easing);
    font-weight: 600;
}
.radio-group.ghost-buttons label:hover span {
    border-color: var(--color-accent-secondary);
    background-color: var(--color-bg-light);
    color: var(--color-text-dark);
}
/* Style for the selected button */
.radio-group.ghost-buttons input[type="radio"]:checked + span {
    background: linear-gradient(135deg, var(--color-accent-primary) 0%, var(--color-accent-secondary) 100%); /* Gradient background */
    border-color: var(--color-accent-strong);
    color: var(--color-text-dark);
    font-weight: 700;
    box-shadow: var(--box-shadow-light);
}
/* Focus style for accessibility */
.radio-group.ghost-buttons input[type="radio"]:focus-visible + span {
     outline: 3px solid var(--color-accent-strong); /* More prominent outline */
     outline-offset: 3px;
}


/* --- Buttons (Refined Transitions) --- */
.btn {
    display: inline-block; padding: 14px 28px; /* Larger padding */
    border: none; border-radius: var(--border-radius);
    font-size: 1.05rem; font-weight: 600; text-decoration: none; cursor: pointer;
    transition: all 0.2s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bouncier transition */
    text-align: center; box-shadow: var(--box-shadow-light);
}
.btn:hover {
    opacity: 0.9;
    box-shadow: var(--box-shadow-medium);
    transform: translateY(-3px) scale(1.02); /* More pronounced hover effect */
}
.btn:active {
    transform: translateY(0px) scale(0.98); /* Slight shrink on click */
    box-shadow: var(--box-shadow-light);
    opacity: 1;
}
.btn:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; transform: none; background-image: none !important; background-color: var(--color-border-medium) !important; color: var(--color-text-secondary) !important; }

.btn-submit {
    background: linear-gradient(135deg, var(--color-accent-strong) 0%, var(--color-accent-secondary) 100%); /* Gradient */
    color: white; width: 100%; box-sizing: border-box; text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
}
.btn-submit:hover { background: linear-gradient(135deg, var(--color-accent-secondary) 0%, var(--color-accent-strong) 100%); }

.btn-copy { background-color: var(--color-text-secondary); color: white; }
.btn-copy:hover { background-color: var(--color-text-dark); }

.btn-download { background-color: var(--color-border-dark); color: white; } /* Using darker neutral */
.btn-download:hover { background-color: var(--color-text-secondary); }

.action-buttons { margin-top: 2em; display: flex; gap: 1.2em; flex-wrap: wrap; }

/* --- Section Visibility Transition --- */
/* Apply base transition properties to elements that will fade/slide */
/* Use a wrapper or apply directly if structure allows */
.processing-indicator-wrapper,
.results-container-wrapper {
    transition: opacity var(--transition-speed) var(--transition-easing),
                transform var(--transition-speed) var(--transition-easing),
                max-height 0.4s ease-in-out; /* Transition max-height */
    opacity: 1;
    transform: translateY(0);
    overflow: hidden; /* Hide content when collapsing */
    max-height: 1000px; /* Set a large max-height */
}

/* Define the hidden state */
.processing-indicator-wrapper.hidden,
.results-container-wrapper.hidden {
    opacity: 0;
    transform: translateY(10px); /* Smaller translate */
    pointer-events: none;
    max-height: 0; /* Collapse height */
    margin-top: 0 !important; /* Remove margin when hidden */
    margin-bottom: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    border: none !important; /* Remove borders if any */
}

/* --- Processing Indicator (Refined) --- */
.processing-indicator {
    margin-top: 2.5em; padding: 2.5em; background-color: var(--color-bg-light);
    border: 1px solid var(--color-border-light); border-radius: var(--border-radius);
    text-align: center; display: flex; flex-direction: column; align-items: center; gap: 1.5em;
    box-shadow: var(--box-shadow-medium);
    margin-bottom: 3em; /* Ensure spacing */
}
/* .processing-indicator.hidden { display: none !important; } */ /* JS will handle wrapper */

.spinner {
    border: 8px solid var(--color-border-light); /* Thicker border */
    border-top: 8px solid var(--color-accent-strong);
    border-radius: 50%;
    width: 60px; /* Larger spinner */
    height: 60px;
    animation: spin 1.2s linear infinite;
     /* animation: spin 1.2s linear infinite, pulseBorder 2s ease-in-out infinite; */ /* Uncomment to add pulse */
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
/* Optional: Add a subtle pulse to the spinner border */
@keyframes pulseBorder {
    0%, 100% { border-color: var(--color-border-light); }
    50% { border-color: var(--color-accent-primary); }
}

.processing-indicator p { margin: 0; font-size: 1.3em; color: var(--color-text-dark); font-weight: 600; }

/* Live Status Area - Animation for new messages */
.live-status-area {
    width: 100%; max-width: 650px; /* Wider */
    margin-top: 1.5em; background-color: var(--color-surface);
    border: 1px solid var(--color-border-medium); border-radius: 6px; padding: 1em 1.5em;
    text-align: center; box-shadow: inset 0 2px 5px rgba(0,0,0,0.06);
}
.live-status-area h4 { margin-top: 0; margin-bottom: 0.6em; font-size: 1em; color: var(--color-text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
p.latest-status-message {
    margin: 0; font-size: 1.05em; color: var(--color-text-primary); min-height: 1.4em; line-height: 1.5; font-weight: 600;
    /* Add transition for smooth text change (optional) */
    /* transition: color 0.3s ease; */
}

@keyframes fadeInStatus {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
/* Add a class to trigger the animation */
.latest-status-message.animate-new {
    animation: fadeInStatus 0.4s var(--transition-easing) forwards;
}


/* --- Results Area (Refined Transitions) --- */
.results-container {
    margin-top: 3em; padding-top: 2.5em;
    border-top: 2px solid var(--color-border-light); /* Thicker border */
    display: flex; flex-direction: column; gap: 3em;
    margin-bottom: 3em; /* Ensure spacing */
}
/* .results-container.hidden { display: none !important; } */ /* JS will handle wrapper */

.results-area h2 {
    margin-top: 0; margin-bottom: 1.2em; color: var(--color-text-dark);
    border-bottom: 3px solid var(--color-accent-primary); /* Stronger underline */
    padding-bottom: 0.5em; display: inline-block; /* Fit underline to text */
}

/* View Toggle */
.view-toggle {
    margin-bottom: 1.8em; display: flex; gap: 0.8em;
    border-bottom: 2px solid var(--color-border-medium); /* Thicker line */
    padding-bottom: 1em;
}
.btn-toggle {
    padding: 10px 20px; font-size: 1rem; background-color: transparent;
    color: var(--color-text-secondary); border: none;
    border-bottom: 4px solid transparent; /* Thicker indicator */
    border-radius: 0; font-weight: 600; box-shadow: none;
    transition: color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing);
}
.btn-toggle.active {
    color: var(--color-accent-strong);
    border-bottom-color: var(--color-accent-strong);
    font-weight: 700;
}
.btn-toggle:hover:not(.active) {
    background-color: var(--color-bg-subtle);
    color: var(--color-text-dark);
    border-bottom-color: var(--color-border-light); /* Hint on hover */
}
.btn-toggle:active { transform: none; box-shadow: none; }

/* View Toggle Transition */
#summary-rendered,
#summary-raw {
    transition: opacity 0.3s var(--transition-easing), visibility 0.3s var(--transition-easing);
    /* Remove height/overflow transitions - rely on parent container */
}

#summary-rendered.hidden,
#summary-raw.hidden {
    opacity: 0;
    visibility: hidden; /* Use visibility for transition */
    position: absolute; /* Allow overlap for cross-fade */
    width: calc(100% - 4em); /* Adjust based on parent padding */
    pointer-events: none;
}

/* Wrapper to manage height for absolute positioned children */
.summary-view-wrapper {
    position: relative;
    min-height: 100px; /* Estimate minimum height or calculate dynamically */
    transition: min-height 0.3s ease-in-out; /* Animate height change */
}


/* Rendered/Raw Views Styling */
.summary-rendered {
    line-height: 1.8; /* More spacing */
    color: var(--color-text-primary); padding: 1.5em 2em; /* More padding */
    border: 1px solid var(--color-border-medium); border-radius: var(--border-radius);
    background-color: var(--color-surface); box-shadow: var(--box-shadow-light);
    /* Remove position:absolute if using wrapper */
}
.summary-rendered h1, .summary-rendered h2, .summary-rendered h3, .summary-rendered h4 {
    color: var(--color-text-dark); margin-top: 1.5em; margin-bottom: 0.8em;
    padding-bottom: 0.3em; border-bottom: 1px solid var(--color-border-light);
}
.summary-rendered h1:first-child, .summary-rendered h2:first-child, .summary-rendered h3:first-child, .summary-rendered h4:first-child { margin-top: 0; }
.summary-rendered p { margin-bottom: 1.2em; }
.summary-rendered ul, .summary-rendered ol { padding-left: 2.5em; margin-bottom: 1.2em; }
.summary-rendered li { margin-bottom: 0.5em; }
.summary-rendered code {
    background-color: var(--color-bg-light); padding: 0.3em 0.6em; /* More padding */
    border-radius: 4px; font-family: var(--font-secondary); /* Use secondary font */
    font-size: 0.9em; color: #BF360C; border: 1px solid var(--color-border-light);
}
.summary-rendered pre {
    background-color: var(--color-bg-subtle); border: 1px solid var(--color-border-medium);
    border-radius: 6px; padding: 1.2em; overflow-x: auto; font-size: 0.95em; /* Slightly larger */
    box-shadow: inset 0 1px 4px rgba(0,0,0,0.04);
}
.summary-rendered pre code { background-color: transparent; padding: 0; border-radius: 0; border: none; color: inherit; font-family: var(--font-secondary); }
.summary-rendered blockquote {
    border-left: 5px solid var(--color-accent-primary); margin-left: 0; padding-left: 1.5em;
    color: var(--color-text-secondary); font-style: italic; background-color: var(--color-bg-light);
    padding-top: 0.5em; padding-bottom: 0.5em; border-radius: 0 4px 4px 0;
}

.summary-raw {
     /* Remove position:absolute if using wrapper */
}
.summary-raw pre {
    white-space: pre-wrap; word-wrap: break-word;
    background-color: var(--color-bg-subtle); padding: 1.5em; /* More padding */
    border: 1px solid var(--color-border-medium); border-radius: var(--border-radius);
    max-height: 600px; /* Increased max height */
    overflow-y: auto; color: var(--color-text-dark);
    font-family: var(--font-secondary); /* Use secondary font */
    font-size: 1rem; /* Slightly larger raw text */
    line-height: 1.6;
    box-shadow: inset 0 1px 4px rgba(0,0,0,0.04);
}

/* Final Status Log (if shown - currently removed from HTML, but styled just in case) */
.status-section .status-log {
    background-color: var(--color-bg-subtle); border: 1px solid var(--color-border-medium);
    border-radius: var(--border-radius); padding: 1em 1.5em; max-height: 350px;
    overflow-y: auto; font-size: 0.9em; color: var(--color-text-secondary);
    box-shadow: var(--box-shadow-light);
}
.status-section .status-log ol { padding-left: 1.8em; margin: 0.8em 0; }
.status-section .status-log li { margin-bottom: 0.5em; padding-left: 0.4em; }
.status-section .status-log li::marker { color: var(--color-accent-primary); font-weight: bold; }

/* Accessibility: Respect Reduced Motion Preference */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
    animation-delay: -0.0001s !important; /* Try to force state jump */
  }
  .spinner { animation: none; }
  .drop-zone.dragover, .btn:hover, .btn:active { transform: none; }
  .latest-status-message.animate-new { animation: none; opacity: 1; transform: none; } /* Ensure status visible */
  .processing-indicator-wrapper.hidden, .results-container-wrapper.hidden { transform: none; opacity: 0; max-height: 0;} /* Ensure hidden state */
  .file-list-display li { animation: none; opacity: 1; } /* Ensure list items visible */
  .summary-view-wrapper { transition: none; } /* Disable height transition */
  #summary-rendered, #summary-raw { transition: none; } /* Disable view transition */
}
